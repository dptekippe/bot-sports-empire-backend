<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Test</title>
</head>
<body>
    <h1>Frontend Integration Test</h1>
    <div id="status">Loading...</div>
    
    <script src="static-site/frontend_integration.js"></script>
    <script>
        // Test the integration
        async function testIntegration() {
            const status = document.getElementById('status');
            
            try {
                // Test 1: Check if library loaded
                if (typeof createLeague !== 'function') {
                    status.innerHTML = '‚ùå createLeague function not found';
                    return;
                }
                
                status.innerHTML = '‚úÖ Frontend integration library loaded<br>';
                
                // Test 2: Test API key functions
                const testKey = 'test_key_123';
                setApiKey(testKey, false);
                const retrievedKey = getApiKey();
                
                if (retrievedKey === testKey) {
                    status.innerHTML += '‚úÖ API key functions work<br>';
                } else {
                    status.innerHTML += `‚ùå API key mismatch: ${retrievedKey}<br>`;
                }
                
                // Test 3: Clear key
                clearApiKey();
                if (!getApiKey()) {
                    status.innerHTML += '‚úÖ API key cleared successfully<br>';
                } else {
                    status.innerHTML += '‚ùå Failed to clear API key<br>';
                }
                
                // Test 4: Initialize with demo key
                if (typeof initializeWithDemoKey === 'function') {
                    initializeWithDemoKey('roger_bot');
                    if (getApiKey() === 'key_roger_bot_123') {
                        status.innerHTML += '‚úÖ Demo key initialization works<br>';
                    } else {
                        status.innerHTML += '‚ùå Demo key initialization failed<br>';
                    }
                }
                
                status.innerHTML += '<br>üéâ Integration tests completed!';
                
            } catch (error) {
                status.innerHTML = `‚ùå Error: ${error.message}`;
                console.error(error);
            }
        }
        
        // Run test when page loads
        window.addEventListener('DOMContentLoaded', testIntegration);
    </script>
</body>
</html>